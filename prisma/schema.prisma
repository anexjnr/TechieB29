generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model AdminUser {
  id           String   @id @default(cuid())
  email        String   @unique
  passwordHash String
  role         Role     @default(ADMIN)
  createdAt    DateTime @default(now())
}

model About {
  id               String  @id @default(cuid())
  heading          String
  content          String
  imageId          String?
  enabled          Boolean @default(true)
  imageUrl         String?
  awards           Json?
  leadership       Json?
  valuesCards      Json?
  valuesHeading    String?
  valuesSubheading String?
  serveHeading     String?
  serveSteps       Json?
  serveSubheading  String?
  image            Asset?  @relation("AboutImage", fields: [imageId], references: [id])
}

model Service {
  id          String  @id @default(cuid())
  title       String
  description String
  icon        String?
  imageId     String?
  order       Int?
  enabled     Boolean @default(true)
  image       Asset?  @relation("ServiceImage", fields: [imageId], references: [id])
}

model Project {
  id          String  @id @default(cuid())
  title       String
  description String
  imageId     String?
  enabled     Boolean @default(true)
  image       Asset?  @relation("ProjectImage", fields: [imageId], references: [id])
}

model TechNews {
  id          String   @id @default(cuid())
  title       String
  url         String   @unique
  imageUrl    String?
  publishedAt DateTime
  updatedAt   DateTime @default(now())
  excerpt     String?
}

model Testimonial {
  id       String  @id @default(cuid())
  author   String
  quote    String
  avatarId String?
  enabled  Boolean @default(true)
  company  String?
  title    String?
  avatar   Asset?  @relation("TestimonialAvatar", fields: [avatarId], references: [id])
}

model ClientSection {
  id         String  @id @default(cuid())
  heading    String
  subheading String?
  details    Json?
  imageUrl   String?
  imageId    String?
  order      Int?    @default(0)
  enabled    Boolean @default(true)
  image      Asset?  @relation("ClientSectionImage", fields: [imageId], references: [id])
}

model Job {
  id          String  @id @default(cuid())
  title       String
  location    String?
  type        String?
  description String
  enabled     Boolean @default(true)
}

model Section {
  id         String  @id @default(cuid())
  key        String  @unique
  heading    String?
  content    String?
  imageId    String?
  enabled    Boolean @default(true)
  order      Int?
  data       Json?
  subheading String?
  imageUrl   String?
  image      Asset?  @relation("SectionImage", fields: [imageId], references: [id])
}

model Product {
  id                  String  @id @default(cuid())
  name                String
  tagline             String?
  description         String?
  keyCapabilities     Json?
  technology          String?
  clientsCountDisplay String?
  clientsRegion       String?
  order               Int?
  enabled             Boolean @default(true)
}

model Asset {
  id             String          @id @default(cuid())
  filename       String
  mime           String
  data           Bytes
  createdAt      DateTime        @default(now())
  abouts         About[]         @relation("AboutImage")
  clientSections ClientSection[] @relation("ClientSectionImage")
  projects       Project[]       @relation("ProjectImage")
  sections       Section[]       @relation("SectionImage")
  services       Service[]       @relation("ServiceImage")
  testimonials   Testimonial[]   @relation("TestimonialAvatar")
}

enum Role {
  ADMIN
  EDITOR
  HR
}
